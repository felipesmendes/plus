!function(t){t.fn.plus=function(e){var n={entity:"",expression:/\[(\w+)\]$/,message:"VocÃª deve ter pelo menos 1 registro",remove:'<input id="remover" type="button" value="&nbsp;-&nbsp;" title="Remover"/>',add:!1,controls:'<tr><td><input id="adicionar" type="button" value="&nbsp;+&nbsp;" title="Adicionar" /></td></tr>'};e&&t.extend(n,e);var i=t(this),r=t(this).find("thead"),o=t(this).find("tbody");n.add===!0&&t(r).append(t(n.controls)),clickI=0,i.on("click","#adicionar",function(){var e=o.find("tr").length;o.find("tr:last").clone().appendTo(o);var i=o.find("tr:last").find("input");i.each(function(r,o){var a=t(o).attr("name"),d=t(o).attr("id"),c=n.expression.exec(a);"remover"!=d&&(t(o).attr("name",n.entity+"["+e+"]["+c[1]+"]"),t(o).val(""),t(o).attr("id",d+clickI),r==i.length-1&&t(o).parent().parent().parent().append("<td>"+n.remove+"</td>"))}),clickI++}),i.on("click","#remover",function(){t(this).closest("tr").remove(),clickI--})}}(jQuery);
